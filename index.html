<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Redirecting to CT Merchant</title>

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Join CT Merchant & Earn!" />
    <meta property="og:description" content="Share this campaign and start earning rewards." />
    <meta property="og:image" content="https://lijugysubwykcydgnntv.supabase.co/storage/v1/object/public/affiliate-banners/affiliate-banners/511f58f5-82d3-495c-b60e-584cee42deec.jpg" />
    <meta property="og:url" content="https://go.ct-merchant.com.ng" />
    <meta property="og:type" content="website" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Join CT Merchant & Earn!" />
    <meta name="twitter:description" content="Share this campaign and start earning rewards." />
    <meta name="twitter:image" content="https://lijugysubwykcydgnntv.supabase.co/storage/v1/object/public/affiliate-banners/affiliate-banners/511f58f5-82d3-495c-b60e-584cee42deec.jpg" />

    <!-- Fallback for bots without JS -->
    <noscript>
      <meta http-equiv="refresh" content="5;url=https://www.ct-merchant.com.ng" />
    </noscript>

    <style>
      body {
        font-family: 'Segoe UI', sans-serif;
        background-color: #f9f9f9;
        color: #333;
        text-align: center;
        padding-top: 80px;
      }
      .logo {
        width: 120px;
        margin-bottom: 20px;
      }
      .message {
        font-size: 20px;
        font-weight: 600;
      }
      .subtext {
        font-size: 16px;
        color: #666;
        margin-top: 10px;
      }
      .progress-bar {
        width: 60%;
        margin: 40px auto 0;
        background: #ddd;
        border-radius: 20px;
        height: 8px;
        overflow: hidden;
      }
      .progress-fill {
        height: 100%;
        background: #4CAF50;
        animation: load 3s linear forwards;
      }
      @keyframes load {
        from { width: 0%; }
        to { width: 100%; }
      }
      #debug {
        font-size: 12px;
        color: #aaa;
        margin-top: 30px;
        display: none;
      }
    </style>
  </head>
  <body>
    <img src="https://yourcdn.com/logo.png" alt="CT Merchant Logo" class="logo" />
    <div class="message">Hang tight, we're taking you to CT Merchant...</div>
    <div class="subtext">This won't take long. You're being redirected securely.</div>
    <div class="progress-bar"><div class="progress-fill"></div></div>
    <div id="debug"></div>

    <script>
      const userAgent = navigator.userAgent;
      const isBot = /bot|facebook|whatsapp|twitter|linkedin|crawler|spider|preview|discord|telegram/i.test(userAgent);
      const urlParams = new URLSearchParams(window.location.search);
      const ref = urlParams.get("ref");
      const campaign = urlParams.get("campaign");

      const debug = document.getElementById("debug");
      debug.innerText = `User-Agent: ${userAgent}\nReferral: ${ref || "none"}\nCampaign: ${campaign || "none"}\nBot: ${isBot}`;

      if (!isBot) {
        setTimeout(() => {
          const redirectUrl = ref
            ? `https://lijugysubwykcydgnntv.functions.supabase.co/redirect?ref=${ref}${campaign ? `&campaign=${campaign}` : ""}`
            : "https://www.ct-merchant.com.ng";
          window.location.href = redirectUrl;
        }, 3000);
      } else {
        debug.style.display = "block";
        console.log("ðŸ¤– Bot detected â€” no redirect triggered.");
      }
    </script>
  </body>
</html>
