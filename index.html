<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CT Merchant Affiliate Campaign</title>

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Join CT Merchant & Earn!" />
    <meta property="og:description" content="Share this campaign and start earning rewards." />
    <meta property="og:image" content="https://lijugysubwykcydgnntv.supabase.co/storage/v1/object/public/affiliate-banners/affiliate-banners/9d8a3f1a-9b13-4aea-ae8b-6521fdd0cebe.jpg" />
    <meta property="og:url" content="https://go.ct-merchant.com.ng" />
    <meta property="og:type" content="website" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Join CT Merchant & Earn!" />
    <meta name="twitter:description" content="Share this campaign and start earning rewards." />
    <meta name="twitter:image" content="https://lijugysubwykcydgnntv.supabase.co/storage/v1/object/public/affiliate-banners/affiliate-banners/9d8a3f1a-9b13-4aea-ae8b-6521fdd0cebe.jpg" />
  </head>
  <body>
    <div style="text-align:center; font-family:sans-serif; margin-top:50px;">
      <p>Redirecting you to CT Merchant...</p>
      <p id="debug" style="font-size:14px; color:gray;"></p>
    </div>

    <script>
      const userAgent = navigator.userAgent;
      const isBot = /bot|facebook|whatsapp|twitter|linkedin|crawler|spider|preview|discord|telegram/i.test(userAgent);
      const urlParams = new URLSearchParams(window.location.search);
      const ref = urlParams.get("ref");
      const campaign = urlParams.get("campaign");

      const debug = document.getElementById("debug");
      debug.innerText = `User-Agent: ${userAgent}\nReferral: ${ref || "none"}\nCampaign: ${campaign || "none"}\nBot: ${isBot}`;

      if (!isBot) {
        setTimeout(() => {
          if (ref) {
            const redirectUrl = `https://lijugysubwykcydgnntv.functions.supabase.co/redirect?ref=${ref}${campaign ? `&campaign=${campaign}` : ""}`;
            console.log("üîó Redirecting to:", redirectUrl);
            window.location.href = redirectUrl;
          } else {
            console.warn("‚ö†Ô∏è No referral code found. Redirecting to homepage.");
            window.location.href = "https://www.ct-merchant.com.ng";
          }
        }, 3000);
      } else {
        console.log("ü§ñ Bot detected ‚Äî no redirect triggered.");
      }
    </script>
  </body>
</html>
